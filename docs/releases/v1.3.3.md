# Release Notes - v1.3.3

[![GitHub Downloads](https://img.shields.io/github/downloads/alexdelprete/ha-abb-fimer-pvi-vsn-rest/v1.3.3/total?style=for-the-badge)](https://github.com/alexdelprete/ha-abb-fimer-pvi-vsn-rest/releases/tag/v1.3.3)

**Release Date**: 2026-01-13

**Focus**: Improved Error Handling for Unsupported Devices

______________________________________________________________________

## Overview

This release adds user-friendly error messaging when users attempt to configure devices that don't support the VSN REST API. Previously, users with devices like PVI-CENTRAL-50 systems would see a confusing "Unexpected response status 404" error. Now they receive a clear message explaining that their device is not supported and suggesting alternatives.

______________________________________________________________________

## What's Changed

### Better Error Handling for Unsupported Devices

When a device returns HTTP 404 (indicating the REST API endpoints don't exist), users now see a clear, helpful error message instead of a generic error.

**Before (v1.3.2):**

> "Unexpected error occurred"

**After (v1.3.3):**

> "This device does not support the REST API. This integration requires a VSN300 or VSN700 datalogger with REST API enabled.
>
> The device returned HTTP 404 (Not Found) for the /v1/status endpoint.
>
> If you have an ABB/FIMER/Power-One inverter without a VSN datalogger, consider using the Modbus integration instead."

This change helps users quickly understand why their device isn't working and what alternatives they have.

______________________________________________________________________

## Bug Fixes

### Fixes #31 - Confusing Error for Unsupported Devices

Thanks to **@geertj74** for reporting this issue!

Users with PVI-CENTRAL-50 or other systems without VSN300/VSN700 dataloggers were receiving unclear error messages when attempting to set up the integration. The device would return HTTP 404 because the REST API endpoints simply don't exist on these devices.

**Changes:**

- Added new `VSNUnsupportedDeviceError` exception for 404 responses
- Added specific detection for HTTP 404 in the VSN model detection flow
- Added user-friendly error messages in all 10 supported languages
- Added debug logging for unsupported device detection

______________________________________________________________________

## Technical Details

### New Exception Type

Added `VSNUnsupportedDeviceError` to the exception hierarchy:

```text
VSNClientError
└── VSNDetectionError
    └── VSNUnsupportedDeviceError  (NEW)
```

### Files Modified

| File | Changes |
|------|---------|
| `exceptions.py` | Added `VSNUnsupportedDeviceError` exception class |
| `auth.py` | Added HTTP 404 detection with specific error logging |
| `config_flow.py` | Added error constant and exception handling |
| `translations/*.json` | Added `unsupported_device` error string (all 10 languages) |

### Languages Updated

The error message has been translated into all supported languages:

- English (en)
- German (de)
- Spanish (es)
- Estonian (et)
- Finnish (fi)
- French (fr)
- Italian (it)
- Norwegian (nb)
- Portuguese (pt)
- Swedish (sv)

______________________________________________________________________

## Upgrade Notes

This is a non-breaking change. Simply update the integration through HACS or manually.

No configuration changes are required.

______________________________________________________________________

## Full Changelog

### Bug Fixes

- fix: add user-friendly error for unsupported devices (HTTP 404) - Fixes #31

### Improvements

- feat: add `VSNUnsupportedDeviceError` exception for better error handling
- feat: add debug logging for unsupported device detection
- i18n: add unsupported device error translations for all 10 languages
